#summary A Mavenized version of the JBoss Seam 2.1.2 groovybooking WEB example

= A Mavenized Version of jboss-seam-2.1.2/examples/groovybooking WEB example =

This is a Mavenized Version of the jboss-seam-2.1.2/examples/groovybooking WEB example project. The example application is tested on JBoss Application Server 4.2.3 GA jdk6.

Mavenizing a Seam Groovy application was not an easy task, i had to do a lot of experimenting to get Groovy to play nice in a Seam Maven environment. I had to upgrade the groovy-all jar to version 1.6.3 which in turn affected the gmaven plugin:
{{{
<plugin>
  <groupId>org.codehaus.groovy.maven</groupId>
  <artifactId>gmaven-plugin</artifactId>
  <configuration>
    <debug>true</debug>
    <stacktrace>true</stacktrace>
    <targetBytecode>1.6</targetBytecode>
    <verbose>true</verbose>
    <sourceEncoding>utf-8</sourceEncoding>
  </configuration>
  <executions>
    <execution>
      <goals>
      <goal>generateStubs</goal>
      <goal>compile</goal>
      <goal>generateTestStubs</goal>
      <goal>testCompile</goal>
    </goals>
    </execution>
  </executions>
</plugin>		
}}}
Note that `<targetBytecode>1.6</targetBytecode>` corresponds to groovy-all version 1.6.x

== Differences from the original application ==
  * The datasource file, `seam-groovybooking-web-ds.xml`, is moved to the project root folder
  * Uses standard Maven directory layout
  * Groovy files are located in the `war/src/groovy` directory
  * Removed `components.properties`, uses filtering to set values in `components.xml`
  * installed="false" did not work for `persistence:entity-manager-factory`, installed must evaluate to "true" for jboss-4.2.3.GA-jdk6
{{{
    <persistence:entity-manager-factory 
      name="groovyEntityManagerFactory"
      persistence-unit-name="groovy" 
      installed="true"/>
}}}
  * No hot code replacement, all compiled code deployed to `WEB-INF/classes`
  * Fixed transient dependencies
  * Used gmaven-plugin to compile Groovy files
  * "groovy-all" must be upgraded to version 1.6.3. Version 1.5.4 provided by the Seam-2.1.2 root POM, does not work.

== How to install and run the application ==
  * [http://seam-maven-refimpl.googlecode.com/svn/trunk/samples/jboss-seam/examples/groovybooking-web Export project from svn]
  * Open a command shell and cd to project folder: groovybooking-web
  * Execute mvn install
  * Copy `groovybooking-web/seam-groovybooking-web-ds.xml` to your appserver's deploy folder, e.g. `C:\ide\server\jboss-4.2.3.GA-jdk6\server\default\deploy`
  * copy directory `groovybooking-web/war/target/seam-groovybooking-web.war` to your appserver's deploy folder
  * Access the application at http://localhost:8080/seam-groovybooking-web