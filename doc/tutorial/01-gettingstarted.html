<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<link rel="stylesheet" href="../styles/blueprint/screen.css" type="text/css" media="screen, projection" />
<link rel="stylesheet" href="../styles/blueprint/print.css" type="text/css" media="print" />

<!--[if IE]>
<link rel="stylesheet" href="../styles/blueprint/ie.css" type="text/css" media="screen, projection" />
<![endif]-->

<link rel="stylesheet" href="../styles/page-layout/page-layout.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../styles/site/site.css" type="text/css" media="screen" />

<title>Seam Maven reference Implentation - Getting Started</title>
</head>
<body>

<div id="sizer">
<div id="expander">
<div id="page-wrapper">

<div id="header">
<div class="header">
  <h1>Getting Started</h1>
</div>
</div> 

<div id="page">

<p>The getting started tutorial outlines the necessary steps to get a Mavenized Seam project up and 
  running.</p>
<p>You must have a basic understanding of 
  <a href="http://docs.jboss.com/seam/latest/reference/en-US/html/Book-Preface.html">
    JBoss Seam</a> (EJB3, JPA, JSF), the
  <a href="http://www.jboss.org/jbossas/docs/index.html">JBoss application server</a>,
  <a href="http://maven.apache.org/guides/getting-started/">Maven</a> and the DBMS of your choice, e.g. 
  <a href="http://dev.mysql.com/">MySql5</a>, to follow this tutorial.</p>

<h2>Shortcuts</h2>
<p>The shortcuts are listed here so we don't have to type the tedious file 
  paths over and over again in this document.</p>
<ul>
  <li><code>${JBOSS_HOME}</code>  - refers to Jboss installation folder, e.g. C:\servers\jboss-4.2.3.GA</li>
  <li><code>${JBOSS_CONFIG}</code> - refers to the configuration directory e.g. C:\servers\jboss-4.2.3.GA\default
  <li><code>${JBOSS_DEPLOY}</code> - refers to the JBoss deploy folder, e.g. C:\servers\jboss-4.2.3.GA\default\deploy</li>
  <li><code>${PROJECT}</code> - the project root folder, i.e. seam-maven-refimpl</li>
  <li><code>${SEAM_REFIMPL}</code> - the folder where the reference project, i.e. seam-refimpl, is installed on your computer</li>
  <li><code>${SEAM_TUTORIAL}</code> - the folder where the tutorial project, i.e. seam-tutorial, is installed on your computer</li>
</ul>

<h2>Download and Install Software</h2>
<ul>
  <li><a href="http://java.sun.com/javase/downloads/index.jsp">jdk-1.5</a></li>
  <li><a href="http://maven.apache.org/download.html">Maven 2.0.9</a> or later.<br/>
    <strong>Note:</strong> Do not use Maven 2.1.0, it has a serious bug, see the 
    <code>${PROJECT}/doc/maven-2.1.0-bug</code> folder for an explanation.<br/>
    A Maven-2.2.0 release candidate can be found 
    <a href="https://repository.apache.org/content/repositories/maven-staging-010/org/apache/maven/apache-maven/2.2.0-RC2/">
    here</a>.
  </li>
  <li>
    <a href="http://tortoisesvn.tigris.org/">Tortoise SVN</a> or a SVN client of your choice.<br/> 
    <strong>Note:</strong> The svn client must be compatible with 
    <a href="http://subclipse.tigris.org/">SubClipse-1.6.x</a> if you are using the Eclipse IDE.
  </li>
  <li><a href="http://www.jboss.org/jbossas/">Jboss 4.2.3.GA Application Server</a> or later.</li>
</ul>
<p>Install the required software.</p>

<h2>Check Out, Install and Run the Project</h2>
<p>The example uses Tortoise SVN to check out the project.<br/>
  <strong>Note:</strong> If you downloaded this project as a zip-file then unzip the file to a folder 
  of your choice and <a href="#install-and-run">jump to step 4</a> of this section.</p>
<ol>
  <li>In explorer right click on the folder where you want to check out the project and select 
  <strong style="white-space:nowrap;">TortoiseSVN&nbsp;&gt;&nbsp;Repo-browser</strong> from the menu.
    <img src="img/tortoise-menu.png" style="width:350px; display:block; margin-top:1em; margin-bottom:1em;" />
  </li>
  <li>
    Navigate to http(s)://seam-maven-refimpl.googlecode.com/svn/trunk.
    <img src="img/tortoise-repo-url.png" style="width:397px; display:block; margin-top:1em; margin-bottom:1em;" />
  </li>
  <li>Right click <strong>trunk</strong> and select <strong>checkout...</strong> from the menu.
    <ul>
      <li>Modify the checkout directory if desired.</li>
      <li>Click the <strong>OK</strong> button to check out the project.</li>
    </ul>
    <img src="img/tortoise-checkout.png" style="width:750px; display:block; margin-top:1em; margin-bottom:1em;" />
  </li>
  <li><a name="install-and-run">
    Navigate to <code>${SEAM_REFIMPL}</code> using a command shell and run: 
    <code>mvn clean install</code></a>
  </li>
  <li>Copy <code>${SEAM_REFIMPL}/ear/target/seam-refimpl-ear.ear</code> to the 
    <code>${JBOSS_DEPLOY}</code> folder.
  </li>
	<li>Start JBossAS<br/>
      Navigate to <code>${JBOSS_HOME}/bin</code> using a command shell and type: <code>run</code> 
  </li>
  <li>Open a browser and point the URL to 
    <a href="http://localhost:8080/seam-refimpl">http://localhost:8080/seam-refimpl</a>
    After logging in, your welcome screen should look like this:
    <img src="img/seam-refimpl-welcome.png" style="width:650px; display:block; margin-top:1em; margin-bottom:1em;" />
    The User Registration page should look something like this:
    <img src="img/seam-refimpl-userreg.png" style="width:590px; display:block; margin-top:1em; margin-bottom:1em;" />
  </li>
</ol>

<h2><a name="switch-to-development-mode">Switch to Development Mode</a></h2>
<ol>
  <li>Svn ignore<br/>
    The following folders and files are added to <strong>svn ignore</strong>.
    <code>
    <ul>
      <li>
        In ${SEAM_REFIMPL} folder
        <ul>
					<li>.externalToolBuilders/</li>
          <li>.metadata/</li>
          <li>.settings/</li>
          <li>target/</li>
          <li>.classpath</li>
          <li>.project</li>
          <li>*.launch</li>
          <li>profiles.xml</li>
        </ul>
      </li>
      <li>
        In ${SEAM_REFIMPL}/<strong>ear</strong> folder
        <ul>
					<li>.externalToolBuilders/</li>
          <li>.settings/</li>
          <li>target/</li>
          <li>.classpath</li>
          <li>.project</li>
          <li>*.launch</li>
        </ul>
      </li>
      <li>
        In ${SEAM_REFIMPL}/<strong>ejb</strong> folder
        <ul>
					<li>.externalToolBuilders/</li>
          <li>.settings/</li>
          <li>target/</li>
          <li>.classpath</li>
          <li>.project</li>
          <li>hibernate-console.properties</li>
          <li>*.launch</li>
        </ul>
      </li>
      <li>
        In ${SEAM_REFIMPL}/<strong>war</strong> folder
        <ul>
					<li>.externalToolBuilders/</li>
          <li>.settings/</li>
          <li>target/</li>
          <li>.classpath</li>
          <li>.project</li>
          <li>*.launch</li>
          <li>src/main/webapp/WEB-INF/.pages.xml.spdia</li>
          <li>src/main/webapp/WEB-INF/.faces-config.xml.jsfdia</li>
        </ul>
      </li>
    </ul>
    </code>
    <br/><strong>Note:</strong> This is the files found so far using Eclipse w. JBoss Tools. There will
    probably be more IDE spesific files to add as other IDEs are put to use. Please
    take care when files are checked into svn, if you find an IDE spesific file then list it here 
    add it to <strong>svn ignore</strong>!
  </li>
  <li>
    Activate <code>profiles.xml</code><br/>
    Copy <code>${SEAM_REFIMPL}/config/profiles/profiles.xml</code> to <code>${SEAM_REFIMPL}</code>.<br/>
    Cd to to <code>${SEAM_REFIMPL}</code> and edit <code>profiles.xml</code>
    <ul>
      <li>
      JBoss profile<br/>
      Locate the <code>as-jboss423</code> profile and point the <code>as.home </code> property to your
      <code>${JBOSS_HOME}</code> folder.
      <pre>
&lt;!-- jboss-4.2.3 --&gt;
&lt;profile&gt;
  &lt;id&gt;as-jboss423&lt;/id&gt;
  &lt;activation&gt;
    &lt;property&gt;
      &lt;name&gt;as&lt;/name&gt;
      &lt;value&gt;jboss423&lt;/value&gt;
    &lt;/property&gt;
  &lt;/activation&gt;
  &lt;properties&gt;
    <strong style="color:blue;">&lt;as.home&gt;C:/jboss-4.2.3.GA&lt;/as.home&gt;</strong>
    &lt;as.deploy&gt;${as.home}/server/default/deploy&lt;/as.deploy&gt;
    &lt;as.jndi.pattern&gt;${app.context}-ear/#{ejbName}/local&lt;/as.jndi.pattern&gt;
  &lt;/properties&gt;
&lt;/profile&gt;</pre>
      </li>
      
      <li>
    Locate the <code>&lt;activeProfiles&gt;</code> tag and check that the following profiles are active:
  <pre>
&lt;activeProfiles&gt;
  &lt;activeProfile&gt;ds-hsqldb&lt;/activeProfile&gt;
  &lt;activeProfile&gt;as-jboss423&lt;/activeProfile&gt;
  &lt;activeProfile&gt;env-dev&lt;/activeProfile&gt;
&lt;/activeProfiles&gt;</pre>
      </li>
      
      <li>
        Use a command shell and run: <code>mvn help:active-profiles</code> and verify that profiles 
          are active.
        <pre>
C:\ide\projects\ok\seam-refimpl>mvn help:active-profiles
[INFO] Scanning for projects...
[INFO] Reactor build order:
[INFO]   seam-refimpl-parent
[INFO]   seam-refimpl-ejb 1.0-SNAPSHOT
[INFO]   seam-refimpl-war 1.0-SNAPSHOT
[INFO]   seam-refimpl-ear 1.0-SNAPSHOT
[INFO] Searching repository for plugin with prefix: 'help'.
[INFO] ------------------------------------------------------------------------
[INFO] Building seam-refimpl-parent
[INFO]    task-segment: [help:active-profiles] (aggregator-style)
[INFO] ------------------------------------------------------------------------
[INFO] [help:active-profiles]
[INFO]
Active Profiles for Project 'no.knowit.seam:seam-refimpl:pom:1.0-SNAPSHOT':

The following profiles are active:

 - <strong style="color:blue;">ds-hsqldb</strong> (source: profiles.xml)
 - <strong style="color:blue;">as-jboss423</strong> (source: profiles.xml)
 - <strong style="color:blue;">env-dev</strong> (source: profiles.xml)</pre>
      </li>
      <li>
        Run: <code>mvn help:effective-pom</code> and verify that the following properties reflects
        the active profiles.
        <pre>
  .
  .
  &lt;properties&gt;
    .
    .
    &lt;as.home&gt;C:/jboss-4.2.3.GA&lt;/as.home&gt;
    &lt;ds&gt;hsqldb&lt;/ds&gt;
    &lt;as.deploy&gt;C:/ide/server/jboss-4.2.3.GA/server/default/deploy&lt;/as.deploy&gt;
    &lt;env&gt;dev&lt;/env&gt;
    &lt;jdk.optimize&gt;false&lt;/jdk.optimize&gt;
    &lt;jdk.debug&gt;true&lt;/jdk.debug&gt;
    &lt;env.unpack.modules&gt;true&lt;/env.unpack.modules&gt;
    &lt;app.context&gt;seam-refimpl&lt;/app.context&gt;
    .
    .
  &lt;/properties&gt;
&lt;/project&gt;</pre>
      </li>
    </ul>
  </li>
  <li>
    Deploy the exploded EAR to the application server.
    <ul>
      <li>Run: <code>mvn clean -Punexplode</code>
      </li>
      <li>Run: <code>mvn package -Pexplode</code></li>
    </ul><br/>
		It is <strong>important</strong> to <strong>clean</strong> the project after switching 
		to development mode. <code>-Punexplode</code> ensures that the project is cleaned from the 
		<code>${JBOSS_DEPLOY}</code> folder as well.<br/>
    Your <code>${JBOSS_DEPLOY}</code> folder should now contain the exploded EAR project:
    <img src="img/exploded-ear.png" style="width:700px; display:block; margin-top:1em; margin-bottom:1em;" /><br/>
  </li>
	<li>
	  <a name="start-jboss">Start JBossAS</a><br/>
      Navigate to <code>${JBOSS_HOME}/bin</code> using a command shell and type: <code>run</code> 
  </li>
  <li>Open a browser and point the URL to 
    <a href="http://localhost:8080/seam-refimpl">http://localhost:8080/seam-refimpl</a>
    After logging in, your welcome screen should again look like this:
    <img src="img/seam-refimpl-welcome.png" style="width:650px; display:block; margin-top:1em; margin-bottom:1em;" />
    The User Registration page should look something like this:
    <img src="img/seam-refimpl-userreg.png" style="width:590px; display:block; margin-top:1em; margin-bottom:1em;" />
  </li>  
</ol>

<h2><a name="activate-a-database-profile">Activate a Database Profile</a></h2>
<p>At some point in time you will want to access data in a database other than the default Hypersonic
  database provided with the JBoss Application Server and you will require some mechanism to do this. 
  The <code>*-ds.xml</code> file located in <code>ear/src/main/resources</code> defines a data source, 
  which is used to access data in a database. These steps explains how to use MySql5 as your data 
  source.
</p>
<ol>
  <li>Download and install necessary software: 
  <ul>
    <li><a href="http://dev.mysql.com/downloads/">MySql5+</a></li>
    <li><a href="http://dev.mysql.com/downloads/connector/j/5.0.html">MySql connector</a></li>
  </ul>
  </li>
  <li>Copy mysql-connector-java-*-bin.jar to <code>${JBOSS_CONFIG}/lib</code> (delete any other 
      mysql-connector-java-*-bin.jar file if exist).
  </li>
  <li>
    Create database schema <code>"refimpl_db"</code>, use e.g. the MySql Administrator GUI.<br/>
    Or, if you are a MySql macho, you can type the following SQL DDL by hand:<br/>
    <code>CREATE DATABASE refimpl_db CHARACTER SET utf8 COLLATE utf8_general_ci;</code><br/>
    <strong>Note:</strong> Allways use UTF8 for i18n.
  </li>
  <li>
    Edit <code>profiles.xml</code>.<br/>
    Locate the <code>ds-mysql5</code> profile and modify the 
    <code>ds</code> properties as needed.
    <pre>
  &lt;!-- MySql5 --&gt;
  &lt;profile&gt;
    &lt;id&gt;ds-mysql5&lt;/id&gt;
    &lt;activation&gt;
      &lt;property&gt;
        &lt;name&gt;ds&lt;/name&gt;
        &lt;value&gt;mysql5&lt;/value&gt;
      &lt;/property&gt;
    &lt;/activation&gt;
    &lt;properties&gt;
      &lt;ds&gt;mysql5&lt;/ds&gt;
      &lt;ds.hibernate.dialect&gt;org.hibernate.dialect.MySQL5InnoDBDialect&lt;/ds.hibernate.dialect&gt;
      &lt;ds.driver.class&gt;com.mysql.jdbc.Driver&lt;/ds.driver.class&gt;
      <strong style="color:blue;">&lt;ds.connection.url&gt;jdbc:mysql://localhost:3306/${app.database.name}?characterEncoding=UTF-8&lt;/ds.connection.url&gt;
      &lt;ds.user.name&gt;root&lt;/ds.user.name&gt;
      &lt;ds.password&gt;&lt;/ds.password&gt;</strong>
    &lt;/properties&gt;
  &lt;/profile&gt;</pre>
  Locate the <code>&lt;activeProfiles&gt;</code> tag and activate the <code>ds-mysql5</code> profile.
  <pre>
  &lt;activeProfiles&gt;
    <strong style="color:blue;">&lt;activeProfile&gt;ds-mysql5&lt;/activeProfile&gt;</strong>
    &lt;activeProfile&gt;as-jboss423&lt;/activeProfile&gt;
    &lt;activeProfile&gt;env-dev&lt;/activeProfile&gt;
  &lt;/activeProfiles&gt;</pre>
  </li>
  <li>
    Run: <code>mvn package -Pexplode</code><br/>
    The properties defined in the active database profile will be filtered into the 
    <code>*-ds.xml</code> file during packaging of the project.
  </li>  
  <li>
    Restart the server and point your browser to 
    <a href="http://localhost:8080/seam-refimpl">http://localhost:8080/seam-refimpl</a>
  </li>
  <li>
    If nothing went wrong <strong>:o)</strong>
  </li>
</ol>

<h2>Clean and Unexplode the Project</h2>
<p>To finish the basic steps of this tutorial we will clean the project and see to that the project 
  is completly removed from the application server.</p>
<ol>
	<li>Shutdown JBossAS before cleaning the project:<br/>
    Navigate to <code>${JBOSS_HOME}/bin</code> using a command shell and type: <code>shutdown -S</code>
    or press Ctrl+C from the command shell that started the server.
  </li>
  <li>
    In the projects command shell run: <code>mvn clean -Punexplode</code>
  </li>
  <li>
    verify that the <code>seam-refimpl-ear.ear</code> folder actually is deleted from the 
    <code>${JBOSS_DEPLOY}</code> folder.
  </li>
  <li>
    This completes the basic steps of the tutorial!
  </li>
</ol>

<h2><a name="use-as-template">Use the <code>seam-refimpl</code> Project as a Template for Your Own Project</a></h2>
<p> Follow these steps to use the <code>seam-refimpl</code> project as a template for your own 
  project.<br/>  
  <strong>Note:</strong> If you downloaded this project as a zip-file then unzip the file to a folder 
  of your choice and <a href="#modfy-the-poms">jump to step 2</a> in this section.</p>
<ol>
	<li> Export from svn.<br/>
    <ul>
      <li>Right click the ${PROJECT} folder and select <strong style="white-space:nowrap;">
        TortoiseSVN&nbsp;&gt;&nbsp;Repo-browser</strong> from the menu.</li>
      <li>In repo browser right click the <code>seam-refimpl</code> folder and select <code>export... </code></li>
      <li>Select Export directory and click <strong>OK</strong></li>
    </ul>
    <img src="img/tortoise-export.png" style="width:750px; display:block; margin-top:1em; margin-bottom:1em;" />
  </li>
  <li><a name="modfy-the-poms">Modify the poms:</a>
    <ul>
    <li>
    The root pom:
    <pre>
  &lt;groupId&gt;<font color="blue">no.company.seam</font>&lt;/groupId&gt;
  &lt;artifactId&gt;<font color="blue">seam-tutorial</font>&lt;/artifactId&gt;
  &lt;version&gt;<font color="blue">0.1-SNAPSHOT</font>&lt;/version&gt;
  &lt;description&gt;<font color="blue">Seam Maven tutorial parent pom</font>&lt;/description&gt;
  .
  .
  &lt;properties&gt;
    &lt;app.context&gt;<font color="blue">seam-tutorial</font>&lt;/app.context&gt;
    &lt;app.display.name&gt;<font color="blue">Seam Tutorial</font>&lt;/app.display.name&gt;
    &lt;app.description&gt;<font color="blue">Happy Seam Maven hacking</font>&lt;/app.description&gt;
    &lt;app.database.name&gt;<font color="blue">refimpl_db</font>&lt;/app.database.name&gt;
    .
    .
  &lt;/properties&gt;
  .
  &lt;/project&gt;</pre>
    </li>
    <li>
      The EAR pom:
  <pre>
  &lt;parent&gt;
    &lt;groupId&gt;<font color="blue">no.company.seam</font>&lt;/groupId&gt;
    &lt;artifactId&gt;<font color="blue">seam-tutorial</font>&lt;/artifactId&gt;
    &lt;version&gt;<font color="blue">0.1-SNAPSHOT</font>&lt;/version&gt;
  &lt;/parent&gt;
  
  &lt;groupId&gt;<font color="blue">no.company.seam</font>&lt;/groupId&gt;
  &lt;artifactId&gt;<font color="blue">seam-tutorial-ear</font>&lt;/artifactId&gt;
  &lt;description&gt;<font color="blue">Seam Maven tutorial ear ....</font>&lt;/description&gt;</pre>
    </li>
    <li>
      The EJB pom:
  <pre>
  &lt;parent&gt;
    &lt;groupId&gt;<font color="blue">no.company.seam</font>&lt;/groupId&gt;
    &lt;artifactId&gt;<font color="blue">seam-tutorial</font>&lt;/artifactId&gt;
    &lt;version&gt;<font color="blue">0.1-SNAPSHOT</font>&lt;/version&gt;
  &lt;/parent&gt;
  
  &lt;groupId&gt;<font color="blue">no.company.seam</font>&lt;/groupId&gt;
  &lt;artifactId&gt;<font color="blue">seam-tutorial-ejb</font>&lt;/artifactId&gt;</pre>
    </li>
    <li>
      The WAR pom:
  <pre>
  &lt;parent&gt;
    &lt;groupId&gt;<font color="blue">no.company.seam</font>&lt;/groupId&gt;
    &lt;artifactId&gt;<font color="blue">seam-tutorial</font>&lt;/artifactId&gt;
    &lt;version&gt;<font color="blue">1.0-SNAPSHOT</font>&lt;/version&gt;
  &lt;/parent&gt;
  
  &lt;groupId&gt;<font color="blue">no.company.seam</font>&lt;/groupId&gt;
  &lt;artifactId&gt;<font color="blue">seam-tutorial-war</font>&lt;/artifactId&gt;</pre>
    </li>
    </ul>
  </li>
  <li>
    Rename the datasource file <code>ear/src/main/resources/seam-refimpl-ds.xml</code> 
    to <code>seam-tutorial-ds.xml</code>
  </li>
  <li>
    <a href="#install-and-run">Deploy the project "out of the box" to verify that everyting works</a>
  </li>
  <li>
    <a href="#switch-to-development-mode">Switch to development mode</a>
  </li>
  <li>
    <a href="#activate-a-database-profile">Activate a Database Profile.</a>
  </li>
  <li>
    How to deploy the data source.<br/>
    You can deploy the <code>*-ds.xml</code> data source file in two ways: <strong>embedded</strong> 
    in the ear project or as  a <strong>separate</strong> service deployed to the 
    <code>${JBOSS_DEPLOY}</code> folder. The default for this build is to embed the 
    <code>*-ds.xml</code> data source in the ear project.<br/>
    If you want to deploy the <code>*-ds.xml</code> data source as a separate service then open the 
    ear pom and make the changes <font color="blue">emphasized in blue</font>.<br/><br/>
    <ol>
    <li>
      Locate the explode and unexplode profiles:
    <pre>
&lt;profiles&gt;
  &lt;profile&gt;
    ..
    &lt;id&gt;explode&lt;/id&gt;
    ..
    &lt;build&gt;
      &lt;plugins&gt;
        &lt;plugin&gt;
          &lt;artifactId&gt;maven-antrun-plugin&lt;/artifactId&gt;
          &lt;executions&gt;
            &lt;execution&gt;
              &lt;id&gt;package&lt;/id&gt;
              &lt;phase&gt;package&lt;/phase&gt;
              &lt;configuration&gt;
                &lt;tasks&gt;
                  ..
                  <font color="blue">
                  &lt;!-- Uncomment if you want to deploy the *-ds.xml file to appserver deploy folder
                   --&gt;
                  &lt;copy todir=&quot;${as.deploy}&quot; file=&quot;${project.build.directory}/${app.ds.xml}&quot; verbose=&quot;true&quot; /&gt;
                  </font>
                &lt;/tasks&gt;
              &lt;/configuration&gt;
    ..
  &lt;/profile&gt;
  
  &lt;profile&gt;
    ..
    &lt;id&gt;unexplode&lt;/id&gt;
    &lt;build&gt;
      &lt;plugins&gt;
        &lt;plugin&gt;
          &lt;artifactId&gt;maven-antrun-plugin&lt;/artifactId&gt;
          &lt;executions&gt;
            &lt;execution&gt;
              &lt;id&gt;clean&lt;/id&gt;
              &lt;phase&gt;clean&lt;/phase&gt;
              &lt;configuration&gt;
                &lt;tasks&gt;
                  ..
                  <font color="blue">
                  &lt;!-- Uncomment if you have deployed the *-ds.xml file to appserver deploy folder
                   --&gt;
                  &lt;delete file=&quot;${as.deploy}/${app.ds.xml}&quot; quiet=&quot;true&quot; /&gt;
                  </font>
                &lt;/tasks&gt;
              &lt;/configuration&gt;
    ..
  &lt;/profile&gt;
  
&lt;/profiles&gt;</pre>
    </li>
    <li>
      Locate the Maven resources plugin with execution id <code>copy-app-ds-xml</code>:
      <pre>
&lt;plugins&gt;
  &lt;plugin&gt;
    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
    &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;
    &lt;executions&gt;
      &lt;execution&gt;
        &lt;id&gt;copy-app-ds-xml&lt;/id&gt;
        ..
        &lt;configuration&gt;
          <font color="blue">
          &lt;!-- Comment out this tag if you have deployed the *-ds.xml file to appserver deploy folder 
          &lt;outputDirectory&gt;${project.build.directory}/${project.build.finalName}&lt;/outputDirectory&gt;
          --&gt;
          
          &lt;!-- Uncomment this tag if you have deployed the *-ds.xml file to appserver deploy folder
          --&gt;
          &lt;outputDirectory&gt;${project.build.directory}&lt;/outputDirectory&gt;
          </font>
          &lt;resources&gt;
            &lt;resource&gt;
              &lt;directory&gt;src/main/resources&lt;/directory&gt;
              &lt;filtering&gt;true&lt;/filtering&gt;
              &lt;includes&gt;
                &lt;include&gt;${app.ds.xml}&lt;/include&gt;
              &lt;/includes&gt;
            &lt;/resource&gt;
          &lt;/resources&gt;
        &lt;/configuration&gt;
      &lt;/execution&gt;
    &lt;/executions&gt;
  &lt;/plugin&gt; 
  ..</pre>
    </li>
    <li>
        Locate the Maven EAR plugin:
        <pre>
..
&lt;!-- Maven EAR plugin --&gt;
&lt;plugin&gt;
  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
  &lt;artifactId&gt;maven-ear-plugin&lt;/artifactId&gt;
  &lt;configuration&gt;
    ..
    &lt;jboss&gt;
      ..<font color="blue">
      &lt;!-- Comment out this tag if you have deployed the *-ds.xml file to appserver deploy folder 
      &lt;data-sources&gt;
        &lt;data-source&gt;${app.ds.xml}&lt;/data-source&gt;
      &lt;/data-sources&gt;
      --&gt;</font>
    &lt;/jboss&gt;
    ..
  &lt;/configuration&gt;
&lt;/plugin&gt;
..</pre>
    </li>
    </ol>
  </li>
  <li>
    Open a command shell and navigate to the <code>${SEAM_TUTORIAL}</code> folder.
    <ul>
      <li>Run: <code>mvn clean -Punexplode</code>
      </li>
      <li>Run: <code>mvn package -Pexplode</code></li>
    </ul><br/>
		It is <strong>important</strong> to <strong>clean</strong> the project after switching 
		to development mode. <code>-Punexplode</code> ensures that the project is cleaned from the 
		<code>${JBOSS_DEPLOY}</code> folder as well.<br/>
    Your <code>${JBOSS_DEPLOY}</code> folder should now contain the exploded EAR project:
    <img src="img/exploded-ear-tutorial.png" style="width:730px; display:block; margin-top:1em; margin-bottom:1em;" /><br/>
  </li>
	<li>
	  <a href="#start-jboss">Start JBoss, open browser, etc...</a>
	</li>
</ol>    

<h2>Tips for Debugging</h2>
<p>
  When your application starts up it will print all components being created (Seam and your own) 
  and the context they are placed in. Validate that your new component is displayed as well.</p>
<p>
  Seam has a debug page showing useful information. To use it, add the following dependency to your war 
  <code>pom.xml</code>:
</p>
<pre>&lt;dependency&gt;
  &lt;groupId&gt;org.jboss.seam&lt;/groupId&gt;
  &lt;artifactId&gt;jboss-seam-debug&lt;/artifactId&gt;
  &lt;version&gt;${jboss.seam.version}&lt;/version&gt;
&lt;/dependency&gt;</pre>
<p>In <code>profiles.xml</code> make shure that the <code>jdk.debug</code> property value is 
<code>true</code>:</p>  
<p>
  Open your browser and point to the following URL to see the debug page.
  <a href="http://localhost:8080/seam-refimpl/debug.seam">http://localhost:8080/seam-refimpl/debug.seam</a>
</p>
<br/>
    
</div> <!-- #page -->
</div> <!-- #page-wrapper -->

<div id="footer">  
<div class="footer">
  <ul class="links" style="text-align: center;">
    <li><a href="01-gettingstarted.html"><strong>Getting started</strong> tutorial</a></li>
    <li><a href="02-eclipse.html"><strong>Eclipse</strong> tutorial</a></li>
    <li><a href="03-intellij.html"><strong>IntelliJ</strong> tutorial</a></li>
    <li><a href="04-netbeans.html"><strong>NetBeans</strong> tutorial</a></li>
  </ul>
</div>
</div> <!-- #footer -->

</div> <!-- #expander -->
</div> <!-- #sizer -->
</body>
</html>
