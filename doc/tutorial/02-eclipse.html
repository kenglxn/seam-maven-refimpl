<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<link rel="stylesheet" href="../styles/blueprint/screen.css" type="text/css" media="screen, projection" />
<link rel="stylesheet" href="../styles/blueprint/print.css" type="text/css" media="print" />

<!--[if IE]>
<link rel="stylesheet" href="../styles/blueprint/ie.css" type="text/css" media="screen, projection" />
<![endif]-->

<link rel="stylesheet" href="../styles/page-layout/page-layout.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../styles/site/site.css" type="text/css" media="screen" />
<title>Seam Maven reference Implentation - Eclipse</title>
</head>
<body>

<div id="sizer">
<div id="expander">
<div id="page-wrapper">
<div id="header">
<div class="header">
  <h1>Eclipse and JBoss Tools</h1>
</div>
</div> 
<div id="page">
    
<p>Denne tutorialen er ikke helt ferdig. Må beskrive stegene som er nødvendige for å benytte JBoss Tools. 
  Screenshots må endres siden jeg har fjernet JAR pom'en. Vise steps for å opprette en entitetklasse
  med autogenerert CRUD UI-grensesnitt. Vise steps for reverse engeneering med autogenerert UI.
</p>

<p>This tutorial explains how to use the Eclipse IDE and JBoss Tools for development.</p>

<h2>Shortcuts</h2>
<p>The shortcuts are listed here so we don't have to type the tedious file 
  paths over and over again in this document.</p>
<ul>
  <li><code>${JBOSS_HOME}</code>  - refers to Jboss installation folder, e.g. C:\servers\jboss-4.2.3.GA</li>
  <li><code>${JBOSS_CONFIG}</code> - refers to the configuration directory e.g. C:\servers\jboss-4.2.3.GA\default
  <li><code>${JBOSS_DEPLOY}</code> - refers to the JBoss deploy folder, e.g. C:\servers\jboss-4.2.3.GA\default\deploy</li>
  <li><code>${PROJECT}</code> - the project root folder, i.e. seam-maven-refimpl</li>
  <li><code>${SEAM_REFIMPL}</code> - the folder where the reference project, i.e. seam-refimpl, is installed on your computer</li>
  <li><code>${SEAM_TUTORIAL}</code> - the folder where the tutorial project, i.e. seam-tutorial, is installed on your computer</li>
</ul>

<h2>Download and install software:</h2>
<ul>
  <li><a href="http://www.eclipse.org/">Eclipse Ganymede 3.4 (with WTP installed)</a></li>
  <li><a href="http://maven.apache.org/download.html">Maven 2.0.9</a> or later.<br/>
    <strong>Note:</strong> Do not use Maven 2.1.0, it has a serious bug, see the 
    <code>${PROJECT}/doc/maven-2.1.0-bug</code> folder for an explanation.<br/>
    A Maven-2.2.0 release candidate can be found 
    <a href="https://repository.apache.org/content/repositories/maven-staging-010/org/apache/maven/apache-maven/2.2.0-RC2/">
    here</a>.
  </li>
  <li><a href="http://m2eclipse.codehaus.org/">Eclipse Maven plugin</a></li>
  <li><a href="http://subclipse.tigris.org/">SubClipse-1.6.x, Team Provider plug-in providing support for Subversion within the Eclipse IDE</a></li>
	<li><a href="http://www.seamframework.org/Download">JBoss Seam 2.1</a></li>
  <li><a href="http://www.jboss.org/tools">JBoss Tools 3</a></li>
  <li><a href="http://www.jboss.org/jbossas/">Jboss 4.2.3.GA Application Server</a></li>
  <li><a href="http://testng.org/doc/eclipse.html">TestNG</a></li>
</ul>

<h2>Configure Eclipse</h2>
<ol>
  <li>
		Create an empty workspace folder, e.g. C:/ide/workspaces<br/>
    <strong>Note:</strong> Do not use your project folder, ${SEAM_TUTORIAL}, as a workspace folder.
	</li>
  <li>
		Start Eclipse and select to the newly created workspace folder.
    <img src="img/eclipse-workspace-launcher.png" style="width:560px; display:block;" />
  </li>
	<li>
	  <strong>Import code styles - To be done!</strong>
	</li>
	<li>
	  Set all editors to UTF-8
    <img src="img/eclipse-utf8-01.png" style="width:700px; display:block;" />
    <img src="img/eclipse-utf8-02.png" style="width:700px; display:block;" />
    <img src="img/eclipse-utf8-03.png" style="width:700px; display:block;" />
    <img src="img/eclipse-utf8-04.png" style="width:700px; display:block;" />
    <img src="img/eclipse-utf8-05.png" style="width:700px; display:block;" />
    <img src="img/eclipse-utf8-06.png" style="width:700px; display:block;" />
    <img src="img/eclipse-utf8-07.png" style="width:700px; display:block;" />
    <img src="img/eclipse-utf8-08.png" style="width:700px; display:block;" />
    <img src="img/eclipse-utf8-09.png" style="width:700px; display:block;" />
	</li>
  <li>
	  Install <a href="http://m2eclipse.codehaus.org/">Eclipse Maven plugin</a> and configure Eclipse 
		to use an external Maven installation.<br/>
		According to 
		<a href="http://www-02.imixs.com:8081/roller/ralphsjavablog/entry/eclipse_maven_install_from_runas">
		this blog</a> there is a problem when running embedded Maven from Eclipse, so we need to configure 
		Eclipse to use an external Maven installation.<br/> 
		Select <strong>Window>Preferences</strong> from the menu and edit details as outlined in image below.
    <img src="img/eclipse-maven-installations.png" style="width:640px; display:block;" />
  </li>
	<li>
		Create a WTP server reference:<br/>
	  Install the <a href="http://www.jboss.org/jbossas/">Jboss 4.2.3.GA Application Server</a>, 
		install <a href="http://www.jboss.org/tools">JBoss Tools 3</a>. The 
		<a href="http://docs.jboss.com/seam/2.1.1.GA/reference/en-US/html/gettingstartedwithjbosstools.html">
		JBoss Seam documentation</a> explains these steps in detail. The screenshots below outlines the 
		steps needed to configure a WTP server reference for JBoss 4.2.3.
		<br/>
		In Preferences, navigate to <strong>Server>Runtime Environments</strong>. Click 
		<strong>Add...</strong>. Browse to the folder named <strong>JBoss, a division of Red Hat</strong> 
		and select <strong>JBoss 4.2 Runtime</strong>.
		<img src="img/eclipse-server-runtime-01.png" style="width:750px; display:block;" />
		Click <strong>Next</strong>, name the server runtime, e.g. JBoss 4.2.3 Runtime, and point the 
		<strong>Home Directory</strong> to the folder where you installed the	server. Select the 
		<strong>Default</strong> configuration. 
		<img src="img/eclipse-server-runtime-02.png" style="width:400px; display:block;" />
		Click <strong>Next</strong>, name the server, e.g. JBoss 4.2.3 Server, and click 
		<strong>Finish</strong>.
		<img src="img/eclipse-server-runtime-03.png" style="width:400px; display:block;" />
		Exit Preferences and switch to the JBoss perspective.
		<img src="img/eclipse-jboss-perspective.png" style="width:300px; display:block;" />
		Doubleclick on the JBoss 4.2.3 Server to open the JBoss 4.2.3 Server Overview tab.
		<img src="img/eclipse-jboss-server-view.png" style="width:190px; display:block;" />
		Verify that the <strong>Use the JBoss deploy folder</strong> radio button is checked.
		<img src="img/eclipse-jboss-server-overview.png" style="width:800px; display:block;" />
		The console output should look something like the screeshot below.
		<img src="img/eclipse-jboss-server-view-started.png" style="width:800px; display:block;" />
  </li>
	<li>
	  Define a data source:
		<img src="img/eclipse-data-management-01.png" style="width:800px; display:block;" />
		<img src="img/eclipse-data-management-02.png" style="width:490px; display:block;" />
		<img src="img/eclipse-data-management-03.png" style="width:490px; display:block;" />
		<img src="img/eclipse-data-management-04.png" style="width:490px; display:block;" />
		Open the <strong>Database Development</strong> perspective. In <strong>Data Source Explorer</strong> 
		rightclick <strong>Databases</strong> folder and select <strong>New...</strong>
		<img src="img/eclipse-data-source-explorer-01.png" style="width:190px; display:block;" />
		<img src="img/eclipse-connection-profile-01.png" style="width:420px; display:block;" />
		<img src="img/eclipse-connection-profile-02.png" style="width:420px; display:block;" />
		<img src="img/eclipse-connection-profile-03.png" style="width:420px; display:block;" />
		<img src="img/eclipse-data-source-explorer-02.png" style="width:300px; display:block;" />
	</li>
  <li>
	  Configure JBoss Tools<br/>
	  Unpack <a href="http://www.seamframework.org/Download">JBoss Seam 2.1</a> to a folder of your 
		choice, e.g. <code>C:/ide/libs/jboss-seam-2.1.1.GA</code>. Follow the screenshots.
		<img src="img/eclipse-jboss-tools-01.png" style="width:750px; display:block;" />
		<img src="img/eclipse-jboss-tools-02.png" style="width:750px; display:block;" />
	</li>
</ol>

<h2>Import a Mavenized Seam Project Into Eclipse</h2>
<p>To import a mavenized Seam project to Eclipse (i.e. a project that is already installed on your 
	computer), follow these steps:
</p>
<ol>
  <li>
		<a href="01-gettingstarted.html#use-as-template">Use the <code>seam-refimpl</code> project 
		as a template</a> to set up the project.
	</li>
  <li>
		<a href="01-gettingstarted.html#switch-to-development-mode">Switch to developmentmode</a>
	</li>
  <li>
		Copy <code>${SEAM_TUTORIAL}/config/profiles/profiles.xml</code> to <code>${SEAM_TUTORIAL}</code>
	</li>
  <li>
		Navigate to the ${SEAM_TUTORIAL} folder using a command shell and execute maven commands:<br/>
    <code>mvn clean -Punexplode<br/>
    mvn install -Pexplode (remember to point the server to the correct deploy folder in
		<code>profiles.xml</code>)<br/>
    mvn eclipse:m2eclipse</code><br/> 
    The last Maven command will generate the Eclipse <code>.project</code> and <code>.classpath</code> 
    files that now makes the project a valid Eclipse project.<br/>
    <strong>Note:</strong> Do not use the <code>eclipse:eclipse</code> command, it does not work 
    properly when m2eclipse is installed.
		
    
		
  </li>
  <li>
    Import project:
    <img src="img/eclipse-import.png" style="width:250px; display:block;" /><br/>
    <img src="img/eclipse-import-maven-01.png" style="width:400px; display:block;" /><br/>
    <img src="img/eclipse-import-maven-02.png" style="width:500px; display:block;" /><br/>
  </li>
  <li>
    Modify Maven properties for parent project.
    <img src="img/eclipse-project-properties-maven-01.png" style="width:600px; display:block;" /><br/>
    The sub modules.
    <img src="img/eclipse-project-properties-maven-02.png" style="width:600px; display:block;" /><br/>
  </li>
  <li>
    Modify Run Configurations:<br/>
    According to 
    <a href="http://www-02.imixs.com:8081/roller/ralphsjavablog/entry/eclipse_maven_install_from_runas">
    this blog</a> there is a problem with running <code>mvn install</code> from eclipse. 
    <a href="http://www-02.imixs.com:8081/roller/ralphsjavablog/entry/eclipse_maven_install_from_runas">
    Read the blog</a> and follow screenshots here to fix the problem.
    <img src="img/eclipse-run-configurations-01.png" style="width:640px; display:block;" />
    <img src="img/eclipse-run-configurations-02.png" style="width:640px; display:block;" />
    <img src="img/eclipse-run-configurations-03.png" style="width:640px; display:block;" />
  </li>
	<li>
	  Start server:
    <img src="img/eclipse-server-view-start-server-01.png" style="width:250px; display:block;" />
		A successful deploy should look like this in the Console log:
    <img src="img/eclipse-server-view-start-server-02.png" style="width:750px; display:block;" />
	</li>
  <li>
		Open a browser and enter <a href="http://localhost:8080/seam-tutorial">
		http://localhost:8080/seam-tutorial</a>
  </li>
</ol>
<br/>



<div style="display:none;">
<h2>Import Maven project to Eclipse</h2>
<ol>
  <li>
    If the SubClipse plugin is  configured corretly and the project was previously checked out from 
    <strong>svn</strong> (using tortoise or a similar tool), then the project should already be under 
    revision control inside Eclipse. If the project does not apear to be under revision control then 
    select all <strong>seam-refimpl</strong> projects, rightclick and select <code>Team &gt; Share Project...</code>
    to get the project under revision control.
    <img src="img/eclipse-import-maven-03.png" style="width:250px; display:block;" /><br/>
  </li>
  <li>Right click on the configured JBoss Server and select <strong>Add and Remove Projects...</strong>
    <img src="img/eclipse-import-maven-04.png" style="width:450px; display:block;" /><br/>
  </li>
  <li>Select the <strong>seam-refimpl-ear</strong> project and click <strong>Add</strong>
    <img src="img/eclipse-import-maven-05.png" style="width:450px; display:block;" /><br/>
  </li>
  <li>Start the server</strong>
    <img src="img/eclipse-import-maven-06.png" style="width:300px; display:block;" /><br/>
  </li>
  <li>Open a browser and enter the URL <a href="http://localhost:8080/seam-refimpl">http://localhost:8080/seam-refimpl</a></li>
</ol>

<h2>Checkout a Maven project to Eclipse from SCM</h2>
<ol>
  <li>Select <strong>File &gt; New &gt; Other...</strong>
    <img src="img/eclipse-scm-maven-01.png" style="width:400px; display:block;" /><br/>
  </li>
  <li>Select <strong>Checkout Maven Projects from SCM</strong></strong>
    <img src="img/eclipse-scm-maven-02.png" style="width:450px; display:block;" /><br/>
    <img src="img/eclipse-scm-maven-03.png" style="width:450px; display:block;" /><br/>
    <img src="img/eclipse-scm-maven-04.png" style="width:450px; display:block;" /><br/>
    <img src="img/eclipse-scm-maven-05.png" style="width:750px; display:block;" /><br/>
  </li>
  <li>Exit eclipse, navigate to the project folder using a command shell and execute Maven command:
     <code>mvn eclipse:m2eclipse</code><br/>
     This command will generate the Eclipse .project and .classpath files that now makes the project 
     a valid Eclipse project. Startup eclipse and import this project into your Eclipse workspace using 
     the File > Import > Existing Project action.
     <strong>Note:</strong> <code>mvn eclipse:eclipse</code> does not work!<br/>
     <strong>Note ii:</strong> Maybe this step is redundant?
  </li>
  <li>Open Eclipse again and right click on the configured JBoss Server and select <strong>Add and Remove Projects...</strong>
    <img src="img/eclipse-import-maven-04.png" style="width:450px; display:block;" /><br/>
  </li>
  <li>Select the <strong>seam-refimpl-ear</strong> project and click <strong>Add</strong>
    <img src="img/eclipse-import-maven-05.png" style="width:450px; display:block;" /><br/>
  </li>
  <li>Start the server</strong>
    <img src="img/eclipse-import-maven-06.png" style="width:300px; display:block;" /><br/>
  </li>
  <li>
    Open a command shell and run <code>mvn clean package -Pexplode</code><br/>
    This is <strong>IMPORTANT</strong> because JBoss Tools clutters up the exploded view.
  </li>
  <li>
    The exploded view on your <code>${JBOSS_DEPLOY}</code> folder should look like this:
    <img src="img/exploded-ear.png" style="width:700px; display:block;" /><br/>
  </li>
  <li>Open a browser and enter the URL <a href="http://localhost:8080/seam-refimpl">http://localhost:8080/seam-refimpl</a><br/>
    After logging in, your welcome screen should look like this:
    <img src="img/seam-refimpl-welcome.png" style="width:650px; display:block;" /><br/>
  </li>
</ol>
</div>






</div> <!-- #page -->
</div> <!-- #page-wrapper -->
<div id="footer">  
  <div class="footer">
  <ul class="links" style="text-align: center;">
    <li><a href="01-gettingstarted.html"><strong>Getting started</strong> tutorial</a></li>
    <li><a href="02-eclipse.html"><strong>Eclipse</strong> tutorial</a></li>
    <li><a href="03-intellij.html"><strong>IntelliJ</strong> tutorial</a></li>
    <li><a href="04-netbeans.html"><strong>NetBeans</strong> tutorial</a></li>
  </ul>
  </div>
</div> <!-- #footer -->
</div> <!-- #expander -->
</div> <!-- #sizer -->
</body>
</html>
